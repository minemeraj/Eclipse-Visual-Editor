<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright IBM Corporation 2004" />
<meta name="DC.rights.owner" content="(C) Copyright IBM Corporation 2004" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Writing a customizer" />
<meta name="DC.Relation" scheme="URI" content="cbeaninf.dita" />
<meta name="DC.Relation" scheme="URI" content="tjvelcustomizer.dita" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="tjvecustomizer" />
<meta name="DC.Language" content="en-us" />
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../swg_info_common.css" />
<title>Writing a customizer</title>
</head>
<body id="tjvecustomizer"><a name="tjvecustomizer"><!-- --></a>

<h1 class="topictitle1">Writing a customizer</h1>
<div><div class="skipspace"><p>A customizer class should implement the interface java.beans.Customizer,
and should also be a subclass of java.awt.Component. Usually, a customizer
is a container such as a java.awt.Panel or javax.swing.JPanel that contains
the controls to let you view and manipulate your Java bean's properties. When
the customizer is launched from the toolbar button, it is hosted inside a
dialog that has  <b>OK</b> and  <b>Cancel</b> buttons.</p>
<p>When a customizer
is opened, it is given the Java bean it is customizing as part of the method
 <tt class="sysout">public void setObject(Object bean);</tt>. The customizer
is then able to make changes directly to the argument.</p>
<p>The java.beans.Customizer
interface also has the methods  <tt class="sysout">public void addPropertyChangeListener(PropertyChangeListener
listener);</tt> and  <tt class="sysout">public void removePropertyChangeListener(PropertyChangeListener
listener)</tt>. The Visual Editor will add itself as a listener
on the customizer, and if the customizer is to refresh the appearance of the
Java bean on the Design view, it should signal a property change by calling
its listeners with any of the methods  <tt class="sysout">firePropertyChange(...</tt> with
any set of arguments.</p>
<p>When you click  <b>OK</b>, the Visual Editor will
try to determine what changes the customizer has made to the Java bean so
it can update the Java source code. To do this, the Visual Editor takes a
copy of all the Java bean's properties before the customizer is launched,
and then compares them with the properties when the customizer is closed.
If any property is different  <var class="varname">( returns false to the .equals method
)</var>, then it is determined as having been changed. To determine the
argument to the set method for the property, the property editor on the java.beans.PropertyDescriptor
is created. Then, it is called with public void setValue(Object) and public
String getJavaInitializationString(); Likewise, when you click  <b>Cancel</b>,
because the customizer has already changed the Java bean, the Visual Editor
queries the set of properties and resets any that are different to their initial
state.</p>
<p>If the customizer is a top level shell that doesn't require a
dialog to run within, such as a java.awt.Frame or javax.swing.JFrame , then
the Visual Editor will run the customizer as is. Because this type of customizer
is responsible for its own set of buttons and the Visual Editor has no way
of knowing whether it was canceled or confirmed, whenever the customizer is
closed, the top level properties are queried to see whether they have changed.
Thus if the customizer performa a cancel it must do so, thereby ensuring the
Java bean's properties are restored to their initial state.</p>
<p>After you
have written a customizer, it needs to be set on the bean descriptor for the
Java bean's bean info class:</p>
<pre>public class MyClassBeanInfo extends SimpleBeanInfo {
    public BeanDescriptor getBeanDescriptor() {
        return new BeanDescriptor(MyClass.class,
MyCustomizer.class);
    }
}</pre>
</div>
</div>
<div><p><b class="relconceptshd">Related concepts</b><br />
<a href="cbeaninf.html" title="">BeanInfo classes and introspection</a><br />
</p>
<p><b class="reltaskshd">Related tasks</b><br />
<a href="tjvelcustomizer.html" title="">Using a customizer to change Java bean properties</a><br />
</p>
</div><div class="runningfooter"><p></p>(C) Copyright IBM Corporation 1999, 2004. All Rights Reserved.
<br />
</div>
</body>
</html>