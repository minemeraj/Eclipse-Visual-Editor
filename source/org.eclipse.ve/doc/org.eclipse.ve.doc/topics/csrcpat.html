<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright IBM Corporation 2003" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="Source code patterns" />
<meta name="DC.Relation" scheme="URI" content="ccodesync.dita" />
<meta name="DC.Relation" scheme="URI" content="ccodegen.dita" />
<meta name="DC.Relation" scheme="URI" content="cextstring.dita" />
<meta name="DC.Relation" scheme="URI" content="cstylegendsrc.dita" />
<meta name="DC.Relation" scheme="URI" content="cmetamig.dita" />
<meta name="DC.Relation" scheme="URI" content="csrcevent.dita" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="csrcpat" />
<meta name="DC.Language" content="en-us" />
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="..\../com.ibm.style.doc/ibmdita.css" />
<link rel="stylesheet" type="text/css" href="..\../com.ibm.style.doc/swg_info_common.css" />
<title>Source code patterns</title>
<script language="JavaScript">
    function popup_window( url, id, width, height )
    {
      popup = window.open( url, id, 'toolbar=no,scrollbars=no,location=no,statusbar=no,menubar=no,resizable=no,width=' + width + ',height=' + height + ',left=100,top=100' );
      popup.focus();
    }
</script></head>
<body id="csrcpat"><a name="csrcpat"><!-- --></a>

<h1 class="topictitle1">Source code patterns</h1><div><p>The source code style currently used by the Visual Editor for Java  <sup>TM</sup> is
based upon the style generated by VisualAge <sup>R</sup> for Java. When the
.java file is opened, a model of the Java beans, their initial property values,
and any relationships between them are created.</p>
<p>To determine the Java beans that appear in the Visual Editor's canvas and
Java Beans viewer, each field is analyzed to see whether or not it should
be included.  To be recognized as a Java bean the following rules must
be satisfied:</p>
<ul><li>The field name must start with ivj unless it is a visual Java bean. 
A visual Java bean is one whose type is a subclass of  <tt>java.awt.Component.</tt></li>
<li>There must be a get method that sets the field value to be an instance
of the Java bean, unless this bean is initialized in a method that is noted
in the Visual Editor Preference page:   <br /><img src="../images/CodePattern1.gif" alt="Code pattern 1" /><br /></li>
</ul>
<p>Fields that start with  <tt>ivjConn</tt> are not treated as Java
beans.  If you wish to make all Java beans, including visual classes,
to be only included if their field name begins with  <tt>ivj,</tt> 
you can specify this using  <b>Window &gt; Preferences &gt; Java &gt; Visual Editor.</b></p>
<p> Change the value of the checkbox  <b>Require prefix of 'ivj' for Swing/AWT
Component names.</b></p>
<p>To illustrate the rules for inclusion of Java beans,  the following
fields are recognized as candidate Java beans.</p>
<div class="p"><pre><tt>private javax.swing.JPanel ivjJPanel;</tt>  
<tt>private javax.swing.JButton anOKButton;</tt>  
<tt>private javax.swing.table.TableModel ivjTableModel;</tt></pre>
 </div>
<p>If  <tt>ivjTableModel</tt> was named differently without beginning
 <tt>ivj</tt> it would not be included in the list of Visual Editor
Java beans, however anOKButton is included because the class  <tt>javax.swing.JButton</tt> is
a descendent of  <tt>java.awt.Component</tt> and it is therefore a
visual Java bean.</p>
<p>As well as having the correct field name, each field must be instantiated
within a get method.  The  <tt>getPanel()</tt> method sets the
field ivjJPanel to be an instance of  <tt>javax.swing.JPanel</tt> so
 <tt>ivjJPanel</tt> has satisfied the rules to be recognized as Java
bean by the Visual Editor.</p>
<div class="p"><pre><tt>private javax.swing.JPanel getJPanel(){</tt> 
<tt>    if ( ivjJPanel == null ) {</tt>  
<tt>        ivjJPanel = new javax.swing.JPanel();</tt> 
<tt>        ivjJPanel.setBackground(java.awt.Color.cyan);</tt> 
<tt>   }</tt> 
<tt>}</tt> </pre>
 </div>
<p>Although the Visual Editor generates methods such as  <tt>getPanel()</tt> that
instantiate and return a single Java bean this is not a requirement. 
A method can instantiate more than one Java bean, and the return value of
the method is not important for recognizing whether the field is a Java bean. 
For the fields  <tt>anOKButton</tt> and  <tt>ivjTableModel</tt> to
be included as Java bean they will therefore need to be instantiated within
a get method in the class.</p>
<p>Once a method has been found for the Java bean that instantiates it, then
it is further analyzed for design time property settings.  In  <tt>getJPanel()</tt> the
method  <tt>ivjJPanel.setBackground(java.awt.Color.cyan)</tt> is used
to determine the initial value of the  <tt>background</tt> property
for the Java bean shown in the canvas and the Properties view.</p>
<p>If the edited class extends a Java bean, the instance being edited is represented
with a special Java bean called a 'this' part. The 'this' part cannot be deleted
from the Design view or Java Beans view, and the initialization method for
its properties are done in the initialize() method. A 'this' part is only
shown in the Design view and Java Beans view if there are any properties that
would be available to set on the Properties view. The set methods for the
properties are generated in the  <tt>initialize()</tt> method or if
the class extends  <tt>java.awt.Applet</tt> the  <tt>init()</tt> method
is used.</p>
<p>When the arguments to a property's set method are parsed, such as the "Hello_World_1"
String argument to the setTitle method, the Visual Editor will attempt to
construct a Java bean for the property value. Most expressions will be successfully
parsed, however not all expressions can be correctly evaluated. In this case
a warning sign will be shown against the Java bean in the views and the reason
for the failure will be shown in the status line.</p>
<p> <img src="../images/ScrollBarParsingError.gif" alt="Java perspective with Visual Editor" /> </p>
<p> The following set of rules must be met for an expression to be successfully
parsed by the Visual Editor:</p>
<ul><li>There must not be a compilation error on the line   </li>
<li>A class must be valid to load and instantiate</li>
<li>Most array initialization expressions cannot be evaluated.</li>
<li>Expressions that involve arithmetic or string concatenation using the
+ operand will be not be evaluated</li>
</ul>
<p>When a set method is parsed it is only applied to the Java bean if it is
a set method that is associated with a  <tt>java.beans.PropertyDescriptor.</tt></p>
</div><div><p><b class="relconceptshd">Related concepts</b><br /><a href="ccodesync.html" title="">Code synchronization</a><br /><a href="ccodegen.html" title="">Code generation</a><br /><a href="cextstring.html" title="">Externalized strings</a><br /><a href="cstylegendsrc.html" title="">Style of generated source</a><br /><a href="cmetamig.html" title="">Metadata and migrating from VisualAge for Java</a><br /><a href="csrcevent.html" title="">Event handling</a><br /></p></div><div class="runningfooter"><p></p>(C) Copyright IBM Corporation 2000, 2003. All Rights Reserved.</div>
</body>
</html>