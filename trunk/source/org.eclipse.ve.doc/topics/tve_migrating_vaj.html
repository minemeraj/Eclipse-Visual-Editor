<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright IBM Corporation 2004" />
<meta name="DC.rights.owner" content="(C) Copyright IBM Corporation 2004" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Migrating code from VisualAge for Java for use in the visual editor" />
<meta name="abstract" content="This topic provides information about migrating Java code from VisualAge for Java." />
<meta name="description" content="This topic provides information about migrating Java code from VisualAge for Java." />
<meta name="DC.Relation" scheme="URI" content="../topics/tve_overview.dita" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="tve_migrating_vaj" />
<meta name="DC.Language" content="en-us" />
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../swg_info_common.css" />
<title>Migrating code from VisualAge for Java for use in the visual editor</title>
</head>
<body id="tve_migrating_vaj"><a name="tve_migrating_vaj"><!-- --></a>

<h1 class="topictitle1">Migrating code from VisualAge for Java for use in the visual editor</h1>
<div><p>This topic provides information about migrating Java code from
VisualAge for Java.</p>
<div class="skipspace"><p>When you make changes to a Java bean using the visual
editor for Java, the source code is updated to reflect the changes. The source
code changes are reflected in <tt class="sysout">set</tt> methods that
change property values. However, some information used by the visual editor
for Java is not stored in properties because it is only required at design
time. This includes the position of a Java bean on the free form surface.</p>
<p>To
store this information so that the visual editor for Java can be reopened
with the Java bean at the same position, it is placed in a comment on the
line that declares the Java bean. The statement below shows a Java bean representing
a JFrame that is positioned at 16,17.</p>
<pre>private javax.swing.JFrame ivjJFrame = null; // @jve:visual-info
decl-index=0 visual-constraint="16,17"</pre>
<p>The comment representing the position of a Java bean is not
required, and if no comment is present then a default position is allocated
when the visual editor for Java is opened. This only applies to top level
Java beans that are not contained within another and does not affect the placement
of components within a container. The location of components within a container
is determined by the container's layout manager and the component's bounds
or constraints.  </p>
<p>In VisualAge for Java, the position of the top level
Java beans (also referred to as free form parts) is not present in the source
code. So, if you migrate a file that was written using VisualAge for Java's
Visual Composition Editor (VCE), default positions are used. If you wish to
keep the positional information, then you can obtain a migration utility that
is loaded into VisualAge for Java. It allows you to regenerate your classes
with the position stored in a comment format. To get the utility, download
the latest <b>Conversion tool for VisualAge for Java Visual Composition Editor
applications</b> from <a href="http://www-1.ibm.com/support/us/search/index.html" target="_blank">www.ibm.com/support/us/</a></p>
<p>This migration
utility is available as a tempfix that can be installed using VAJava's FixManager <span class="uicontrol">Workspace
&gt; Tools &gt; FixManager</span>. The utility will allow you to migrate and
export classes that have been developed using VisualAge for Java's VCE to
a format suitable for the visual editor. After installing this patch you can
select a menu item called <span class="uicontrol">VCE Code Generation/Export...</span> from
the pop-up menu of projects, packages, or classes. Selecting this item will
launch a wizard that allows you to regenerate the code for classes that have
been previously saved with the VCE. The free form positions will be saved
in the comment format used by the visual editor.</p>
<p>If you have connections,
we recommend you first regenerate this code using the Event Handling's third
option of the VCE code generation options (i.e. 'Use an inner class for each
event') before running this utility. However, some classes will not be able
to be converted to this style due to a bug in VisualAge for Java. In this
case, you should convert to style 2. The wizard also gives you the option
to export the classes to a directory once the code generation is complete.
Note that the visual editor for Java events support will not parse the old
VCE style 1 ('Do not use any inner classes') pattern. Notice how you can set
the code generation styles 1, 2, and 3:  <br /><img src="../images/VCEpattern1.gif" alt="VCE pattern 1" /><br />  <br /><img src="../images/VCEpattern2.gif" alt="VCE pattern 2" /><br /></p>
<p>Since the VCE maintained its
own model of the Java beans and their property values and relationships, it
always regenerated the source in a top-down fashion from this model. Any modifications
made by a user to the source were limited to pre-defined user code points
in the source delimited by comments  <samp class="codeph">//user code begin {1}</samp> and
 <samp class="codeph">//user code end.</samp> Also, to indicate that the methods for
the Java beans would be regenerated each time code generation was performed,
the line  <samp class="codeph">/* WARNING: THIS METHOD WILL BE REGENERATED. */</samp> was
added to the method comment. The migration utility has an option that will
remove these VCE generated comments from the exported code (not the source
code in VisualAge for Java), as they are no longer applicable outside the
VCE. However, once the comments for the user code points have been removed
from the source, the user code cannot be used within VisualAge for Java. The
reason is that the presence of these comments is what protects the user code
from being overwritten.</p>
<p>The visual editor for Java does not use a persistent
object model for its Java beans and their property values and relationships,
and instead parses the source each time. For this reason, the comments for
user code points and for specifying method regeneration no longer apply, and
modifications can be made freely to the source code. If the modifications
alter the source code structure so that the visual editor for Java can no
longer recognize the structure of the Java beans, you may not see them in
the Design view or the Java beans list. However, the source will not be altered
to suit the editor's style, and your changes will be preserved.</p>
</div>
</div>

<div>
<p>
<b class="parentlink">Parent topic:</b> <a href="../topics/tve_overview.html" title="This section of the help describes the visual editor for Java and how to use the visual editor to develop and test visual Java classes and applications.">Using the visual editor for Java</a><br />
</p>
</div><div class="runningfooter"><p></p>(C) Copyright IBM Corporation 1999, 2004. All Rights Reserved.
<br />
</div>
</body>
</html>
