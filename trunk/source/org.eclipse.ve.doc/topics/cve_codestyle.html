<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright IBM Corporation 2004" />
<meta name="DC.rights.owner" content="(C) Copyright IBM Corporation 2004" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="Source code generated and parsed by the visual editor" />
<meta name="abstract" content="There are different styles or ways for writing Java code. The visual editor uses a particular style for its generated Java code." />
<meta name="description" content="There are different styles or ways for writing Java code. The visual editor uses a particular style for its generated Java code." />
<meta name="DC.Relation" scheme="URI" content="../topics/cve_codegen.dita" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="cve_codestyle" />
<meta name="DC.Language" content="en-us" />
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../swg_info_common.css" />
<title>Source code generated and parsed by the visual editor</title>
</head>
<body id="cve_codestyle"><a name="cve_codestyle"><!-- --></a>

<h1 class="topictitle1">Source code generated and parsed by the visual editor</h1>
<div><p>There are different styles or ways for writing Java code. The visual
editor uses a particular style for its generated Java code.</p>
<p>The visual editor for Java generates valid Java code that can be properly
compiled and run. In addition, when the visual editor parses existing Java
code, it uses rules to determine which elements of the code to try to visualize
in the Design view.</p>
<p><b>Rules for parsable code</b></p>
<div class="p">The visual editor for Java attempts to visualize code in the Design view
if the code meets any of the following criteria:<ul><li>The component is a visual class. Visual classes are subclasses of <samp class="codeph">java.awt.Component</samp> or <samp class="codeph">org.eclipse.swt.widgets.Widget</samp>. These are already modeled by the visual editor.</li>
<li>The declaration includes a <samp class="codeph">// @jve: parse</samp> annotation.
When you drop a non-visual component onto the Design view, the visual editor
generates an annotation that says the code should be parsed by the visual
editor. An example of a full annotation looks like this:<pre>//  @jve:decl-index=0:parse,visual-constraint="201,92"</pre>
If
you type your own Java code for a non-visual component and you want it to
be included on the Design view, be sure to include an annotation similar to
this.</li>
<li>The field name begins with the letters <kbd class="userinput">ivj</kbd>. This
rule exists to satisfy existing legacy code.</li>
</ul>
</div>
<p>There are other requirements that the visual editor checks before visualizing
a component on the graphical Design view:</p>
<ul><li>Fields must be instantiated within a <samp class="codeph">get</samp> method, or the
bean must be initialized by an initialization method that is listed on the
Pattern Styles tab of the visual editor Preferences page. Notice in the following
image that the <samp class="codeph">jbInit</samp>, <samp class="codeph">initComponents</samp>, and <samp class="codeph">initialize</samp> methods
are specified as initialization methods:   </li>
<li>There must not be a compilation error on the line.</li>
<li>A class must be valid to load and instantiate</li>
<li>Most array initialization expressions cannot be evaluated</li>
<li>Expressions that involve arithmetic or string concatenation using the
+ operand will be not be evaluated</li>
</ul>
<p>Most expressions are successfully parsed, but not all expressions can be
correctly evaluated. In this case a warning sign will be shown against the
Java bean in the views, and the reason for the failure will be shown in the
status line when the bean is selected on the Design view or Java Beans view.
A warning icon will also display on the canvas.</p>
<p><b>Code generated by the visual editor</b></p>
<ul><li>The visual editor generates default constructors that call the method <samp class="codeph">initialize()</samp>,
which sets the values of the properties for the class.</li>
<li>For applets, the code to set the initial property values is called  <samp class="codeph">init()</samp>.
This is not called by the constructor, as it will be executed by the applet
browser itself.</li>
<li><b>Optional:</b> You can specify that the visual editor generate <samp class="codeph">try{}catch()</samp> blocks
for components. This will continuously catch every exception thrown during
initialization, and the the risk of exceptions being suppressed could increase.
Therefore, it is better to let the exception pass through instead. You can
select this option on the Code Generation tab of the visual editor preferences
(<span class="menucascade"><span class="uicontrol">Window</span> &gt; <span class="uicontrol">Preferences</span> &gt; <span class="uicontrol">Java</span> &gt; <span class="uicontrol">Visual Editor</span></span>).
The following code shows a JPanel initialized with the <samp class="codeph">try{}catch()</samp> block:<pre>private JPanel getJPanel1() {
		if (jPanel1 == null) {
			try {
				jPanel1 = new JPanel();
			}
			catch (java.lang.Throwable e) {
				// TODO: Something
			}
		}
		return jPanel1;
	}</pre>
The following code shows a JPanel without the <samp class="codeph">try{}catch()</samp> block
of code:<pre>private JPanel getJPanel() {
		if (jPanel == null) {
			jPanel = new JPanel();
		}
		return jPanel;
	}</pre>
</li>
<li><b>Optional:</b> You can also specify that the visual editor add a comment
marking each expression that it generates. This could be useful for distinguishing
hand-written code from generated code. The following line of code is an example
of what the comment looks like:<pre>this.add(getJPanel(), null);  // Generated</pre>
To
turn on this option, select the <span class="uicontrol">Generate a comment for new expressions</span> check
box on the on the Code Generation tab of the visual editor preferences.</li>
<li>For Swing/AWT, although the visual editor generates methods such as <samp class="codeph">getPanel()</samp> that
instantiate and return a single Java bean, this is not a requirement. A
method can instantiate more than one Java bean, and the return value of the
method is not important for recognizing whether the field is a Java bean. For
the fields <samp class="codeph">anOKButton</samp> and <samp class="codeph">ivjTableModel</samp> to
be included as Java beans, they will need to be instantiated within a <samp class="codeph">get</samp> method
in the class.</li>
<li>For SWT, the visual editor generates <samp class="codeph">private void createFoo()</samp> methods
for every class extending Composite, and any children beans are initialized
within the same method.</li>
<li>If the edited class extends a Java bean, the instance being edited is
represented with a special Java bean called a 'this' part. The 'this' part
cannot be deleted from the Design view or Java Beans view, and the initialization
method for its properties are done in the <samp class="codeph">initialize()</samp> method.
A 'this' part is only shown in the Design view and Java Beans view if there
are any properties that are available to set on the Properties view.
The set methods for the properties are generated in the  <samp class="codeph">initialize()</samp> method,
or if the class extends <samp class="codeph">java.awt.Applet</samp> the <samp class="codeph">init()</samp> method
is used.</li>
</ul>
</div>

<div>
<p>
<b class="parentlink">Parent topic:</b> <a href="../topics/cve_codegen.html" title="As you make changes to a visual class in the Design view, the Java source is updated. Likewise, as you edit the Java source, the graphical design view is updated to reflect the code changes.">Source code generation in the visual editor</a><br />
</p>
</div><div class="runningfooter"><p></p>(C) Copyright IBM Corporation 1999, 2004. All Rights Reserved.
<br />
</div>
</body>
</html>